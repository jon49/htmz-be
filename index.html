<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTMZ a Back-End Driven Hypermedia Approach</title>
  <link rel="stylesheet" href="./css/main.css">
</head>

<body>

  <main>

    <h1>HTMZ a Back-End Driven Hypermedia Approach</h1>

    <fieldset id="themeForm">
      <label class="pointer" aria-label="Use light theme." title="Use light theme."><input type="radio" name="theme" value="light">&#x1F324;</label>
      <label class="pointer" aria-label="Use dark theme." title="Use dark theme."><input type="radio" name="theme" value="dark">&#9728;</label>
      <label class="pointer" aria-label="Use default theme." title="Use default theme."><input type="radio" name="theme" value="default">&#9729;</label>
    </fieldset>

    <script>
      (() => {
        const theme = localStorage.getItem('theme') || 'default';
        document.querySelector(`input[name="theme"][value="${theme}"]`).checked = true;
        
        themeForm.addEventListener('change', e => {
          if (e.target.value === 'default') {
            localStorage.removeItem('theme');
          } else {
            localStorage.setItem('theme', e.target.value);
          }
        });
      })()
    </script>

    <nav>
      <a href="#introduction">Introduction</a> |
      <a href="#documentation">Documentation</a> |
      <a href="#examples">Examples</a> |
      <a href="#advanced">Advanced Usage</a>
    </nav>

    <h2 id="introduction">Introduction</h2>

    <p><em><a href="https://leanrada.com/htmz/">HTMZ</a> is a minimalist HTML
      microframework for creating interactive and modular web user interfaces with
      the familiar simplicity of plain HTML.</em> This is an "extension" that I have
      made to make it even more powerful and flexible.</p>

    <p><span>Features:</span></p>
    <ul>
      <li>Automatic partial page updates</li>
      <li>Seamless form submissions</li>
      <li>Back end driven hypermedia requests. The back end determines how to update the front end.</li>
      <li>Lightweight and easy to use</li>
    </ul>

    <h2 id="documentation">Documentation</h2>

    <p>This implementation of HTMZ uses four APIs to determine how the updates are applied.</p>

    <ol>
      <li><code>id</code>
        <p>The id attribute matches the element that will be updated. It
        replaces the original element with the new content. This is the
        simplicist and easiest way to perform updates.</p>
      </li>
      <li><code>hz-target</code>
        <p>uses the query selector to determine what element to update.</p>
      </li>
      <li><code>hz-swap</code>
        <p>determines how the content is inserted. There are four different values which can be used:</p>
        <ul>
          <li><code>replaceWith</code> - replaces the content of the target
          element (default). In practice this never needs to be explicit.</li>
          <li><code>append</code> - appends the content to the end of the target element</li>
          <li><code>prepend</code> - prepends the content to the beginning of the target element</li>
          <li><code>before</code> - inserts the content before the target element</li>
          <li><code>after</code> - inserts the content after the target element</li>
        </ul>
      </li>
      <li><code>template</code>
        <p>When you do not have a root HTML element use the <code>template</code>
          element. This is useful for inserting table rows, list items, and other
          elements that do not have a single root element. When you return an
          empty <code>template</code> it will delete the old the element it is
          replacing when you use the strategy <code>replaceWith</code> (which is
          default).</p>
      </li>
    </ol>

  <h2 id="examples">Examples</h2>

  <h3>Simple Todo</h3>

  <p>This example shows a simple todo list implementation using HTMZ.</p>

  <details>
    <summary show-html-code="listExample">Original Code</summary>
  </details>

  <details>
    <summary>HTML Response</summary>
    <code id="todoResponse">No data has been returned yet.</code>
  </details>

  <div id="listExample">
<ul id="list"></ul>

<form method="post" action="./new" target="htmz" onsubmit="setTimeout(()=>this.reset())">
  <input type="text" name="item" placeholder="Item">
</form>

<div id="events"></div>
  </div>

  <hr>

  <h3>Dynamic Table</h3>

  <p>This example demonstrates dynamic table row addition using HTMZ. Note that
  the table elements need to be wrapped in <code>&lt;template&gt;</code>
  tags.</p>

  <details>
    <summary show-html-code="tableExample formExample">Original Code</summary>
  </details>

  <details>
    <summary>HTML Response</summary>
    <pre id="tableResponse">No data has been returned yet.</pre>
  </details>

  <br>

  <div id="tableExample">
<table>
  <thead>
    <th><button form="get" formaction="./new-row">Add Row</button></th>
    <th><button form="get" formaction="./clear-table">Clear Table</button></th>
  </thead>
  <tbody></tbody>
</table>
  </div>

  <h3>Replace a link with new content.</h3>

  <details>
    <summary show-html-code="anchorExample">Original Code</summary>
  </details>

  <details>
    <summary>HTML Response</summary>
    <pre id="linkResponse">No data has been returned yet.</pre>
  </details>

  <br>

  <div id="anchorExample">
<a id="link" href="./link" target="htmz">Get secret message.</a>
  </div>

    <h2 id="advanced">Advanced Usage</h2>

    <p><a href="https://github.com/jon49/Soccer">For advanced usage please refer
    to my soccer application</a>. It shows that you can create rather complex
    web applications with this pattern, including offline first PWA with highly
    dynamic data.</p>

    <p><strong>Features</strong></p>

    <ul>
      <li>The application uses <a
      href="https://github.com/patrick-steele-idem/morphdom">Morphdom</a> to
      diff the returned HTML (in place of the swap type
      <code>replaceWith</code>).</li>
      <li>It uses the <a
      href="https://www.lorenstew.art/blog/frontend-event-system#step-2-the-declarative-dom-action-system"><code>data-action</code>
      pattern</a> to define custom actions for elements. <a
      href="https://www.lorenstew.art/blog/frontend-event-system#step-2-the-declarative-dom-action-system">See
      also.</a></li>
      <li>It uses the above pattern to anchor elements to where they are during
      submission. E.g., the Todo example above the input would stay in the same
      location on the screen.</li>
      <li>It uses custom elements to perform actions when data is returned from
      the server, like browser refreshes and redirects.</li>
    </ul>

  </main>

  <div id="formExample">
<form id="post" method="post" target="htmz"></form>
<form id="get" target="htmz"></form>
  </div>

<script src="./js/sw-loader.js"></script>
<script src="./js/show-original-code.js"></script>
<script src="./js/htmz-simple.js"></script>

</body>

</html>